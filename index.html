<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Demo E-commerce — Example Shop</title>
  <style>
    /* Reset + base */
    :root{
      --bg:#f5f6f8; --card:#ffffff; --muted:#6b7280; --accent:#0f766e; --accent-2:#059669;
      --shadow: 0 6px 18px rgba(15,23,42,0.06);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box;}
    html,body{height:100%;margin:0;background:var(--bg);color:#0f172a;}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;height:auto;display:block}

    /* Header */
    .topbar{
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff;padding:14px 20px;display:flex;align-items:center;gap:20px;
      position:sticky;top:0;z-index:40;box-shadow:0 6px 18px rgba(2,6,23,0.12);
    }
    .brand{font-weight:700;font-size:18px;letter-spacing:0.2px}
    .search{
      flex:1;display:flex;gap:10px;align-items:center;
      max-width:900px;background:rgba(255,255,255,0.12);padding:6px;border-radius:8px;
    }
    .search input{
      flex:1;border:0;background:transparent;color:#fff;padding:8px 6px;outline:none;
    }
    .top-actions{display:flex;gap:12px;align-items:center}
    .icon-btn{background:transparent;border:1px solid rgba(255,255,255,0.14);padding:8px;border-radius:8px;color:#fff;cursor:pointer}
    .cart-badge{background:#ef4444;color:#fff;border-radius:999px;padding:2px 7px;font-size:12px;margin-left:6px}

    /* Layout */
    .container{max-width:1200px;margin:28px auto;padding:0 18px;display:grid;grid-template-columns:260px 1fr;gap:22px}
    @media (max-width:900px){ .container{grid-template-columns:1fr;padding:18px} .left-col{order:2} .main-col{order:1} }

    /* Sidebar filters */
    .panel{background:var(--card);padding:16px;border-radius:12px;box-shadow:var(--shadow)}
    .filters h4{margin:0 0 12px 0;font-size:15px}
    .filter-group{margin-bottom:14px}
    .category-list button{display:block;width:100%;text-align:left;padding:8px;border-radius:8px;border:0;background:#f8fafc;margin-bottom:6px;cursor:pointer}
    .price-range{display:flex;gap:8px}
    .price-range input{flex:1;padding:8px;border-radius:8px;border:1px solid #e6e9ee}

    /* Main content */
    .hero{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px}
    .hero .title{font-size:22px;font-weight:700}
    .hero .summary{color:var(--muted);font-size:14px}
    .sort-row{display:flex;gap:12px;align-items:center}
    .selector{padding:8px;border-radius:8px;border:1px solid #e6e9ee;background:#fff}

    /* Product grid */
    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    @media (max-width:1100px){ .grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:600px){ .grid{grid-template-columns:1fr} }

    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
    .card .media{height:170px;border-radius:10px;overflow:hidden;background:linear-gradient(180deg,#f8fafc,#eef2f6);display:flex;align-items:center;justify-content:center}
    .card h3{margin:0;font-size:15px}
    .price-row{display:flex;justify-content:space-between;align-items:center;gap:8px}
    .price{font-weight:700}
    .muted{color:var(--muted);font-size:13px}
    .card .actions{display:flex;gap:8px}
    .btn{padding:8px 10px;border-radius:10px;border:0;cursor:pointer}
    .btn-primary{background:var(--accent);color:#fff}
    .btn-ghost{background:#f3f4f6;border:1px solid #e6e9ee}

    /* Cart sidebar */
    .cart-panel{
      position:fixed;right:18px;top:70px;width:360px;max-width:calc(100% - 40px);height:80vh;
      transform:translateX(110%);transition:transform .28s;z-index:60;
      display:flex;flex-direction:column;
    }
    .cart-panel.open{transform:translateX(0)}
    .cart-panel .panel{flex:1;display:flex;flex-direction:column;padding:12px;overflow:auto}
    .cart-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:10px}
    .cart-item img{width:64px;height:64px;object-fit:cover;border-radius:8px}
    .cart-footer{padding:12px;background:#fff;border-radius:12px;box-shadow:var(--shadow);margin-top:10px}
    .qty-control{display:inline-flex;align-items:center;border-radius:8px;overflow:hidden;border:1px solid #e6e9ee}
    .qty-control button{padding:6px 8px;border:0;background:transparent;cursor:pointer}
    .empty{padding:30px;text-align:center;color:var(--muted)}

    /* Footer */
    footer{max-width:1200px;margin:26px auto;padding:18px;border-radius:12px;color:var(--muted);display:flex;justify-content:space-between;gap:12px}
    @media (max-width:700px){ footer{flex-direction:column;align-items:center} }

    /* Tiny utilities */
    .small{font-size:13px}
    .ghost-link{color:var(--accent);font-weight:600}
  </style>
</head>
<body>
  <header class="topbar" role="banner">
    <div class="brand">Example Shop</div>

    <div class="search" role="search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.9"><path d="M21 21l-4.35-4.35" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#fff" stroke-width="2"/></svg>
      <input id="searchInput" placeholder="Search product (e.g. 'shirt', 'phone')" aria-label="Search products" />
      <button class="icon-btn" id="clearSearch" title="Clear search">×</button>
    </div>

    <div class="top-actions" aria-hidden="false">
      <button class="icon-btn" id="filterToggle">Filters</button>
      <button class="icon-btn" id="cartToggle">
        Cart
        <span id="cartCount" class="cart-badge">0</span>
      </button>
    </div>
  </header>

  <main class="container" role="main">
    <!-- LEFT: filters -->
    <aside class="left-col">
      <div class="panel filters" id="filtersPanel">
        <h4>Categories</h4>
        <div class="category-list" id="categoryList">
          <!-- buttons inserted by JS -->
        </div>

        <div class="filter-group">
          <h4>Price</h4>
          <div class="price-range">
            <input id="minPrice" type="number" placeholder="Min" />
            <input id="maxPrice" type="number" placeholder="Max" />
          </div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button class="btn btn-primary" id="applyPrice">Apply</button>
            <button class="btn btn-ghost" id="resetPrice">Reset</button>
          </div>
        </div>

        <div class="filter-group">
          <h4>Sort</h4>
          <select id="sortSelect" class="selector" aria-label="Sort products">
            <option value="featured">Featured</option>
            <option value="price-asc">Price: Low → High</option>
            <option value="price-desc">Price: High → Low</option>
            <option value="name-asc">Name: A → Z</option>
          </select>
        </div>
      </div>
    </aside>

    <!-- RIGHT: main -->
    <section class="main-col">
      <div class="hero">
        <div>
          <div class="title">Shop everything — top products, curated for you</div>
          <div class="summary small">Demo store with product cards, filters and a working cart (client-side only).</div>
        </div>

        <div class="sort-row small muted">
          Showing <span id="showingCount">0</span> products
        </div>
      </div>

      <div id="productGrid" class="grid" aria-live="polite">
        <!-- product cards inserted by JS -->
      </div>
    </section>
  </main>

  <!-- Cart panel -->
  <aside class="cart-panel" id="cartPanel" aria-hidden="true">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">Your Cart</h3>
        <button class="icon-btn" id="closeCart">Close</button>
      </div>

      <div id="cartItemsContainer" style="margin-top:12px">
        <div class="empty" id="cartEmpty">Cart is empty</div>
      </div>
    </div>

    <div class="cart-footer">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <div class="small muted">Subtotal</div>
        <div id="cartSubtotal" style="font-weight:700">৳0</div>
      </div>
      <div style="display:flex;gap:8px">
        <button class="btn btn-ghost" id="clearCart">Clear</button>
        <button class="btn btn-primary" id="checkoutBtn" style="flex:1">Checkout</button>
      </div>
    </div>
  </aside>

  <footer>
    <div class="small muted">© <span id="year"></span> Example Shop — demo e-commerce layout</div>
    <div class="small">Built with ❤️ — <a class="ghost-link" href="#" onclick="alert('This is a demo')">Learn more</a></div>
  </footer>

  <script>
    // Demo product data (id, name, price in Bangladeshi Taka (৳), category, image)
    const products = [
      {id:1,name:"Classic White Shirt",price:1299,cat:"Clothing",img:"https://images.unsplash.com/photo-1520975915683-6d7c2d1c1f6b?w=800&q=60"},
      {id:2,name:"Smartphone X12",price:42999,cat:"Electronics",img:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=800&q=60"},
      {id:3,name:"Running Sneakers",price:3499,cat:"Footwear",img:"https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=800&q=60"},
      {id:4,name:"Wireless Headphones",price:5999,cat:"Electronics",img:"https://images.unsplash.com/photo-1512496015851-a90fb38ba796?w=800&q=60"},
      {id:5,name:"Elegant Watch",price:8999,cat:"Accessories",img:"https://images.unsplash.com/photo-1519741490286-df3de8a8e9e9?w=800&q=60"},
      {id:6,name:"Leather Wallet",price:1599,cat:"Accessories",img:"https://images.unsplash.com/photo-1545239351-1141bd82e8a6?w=800&q=60"},
      {id:7,name:"Winter Jacket",price:6499,cat:"Clothing",img:"https://images.unsplash.com/photo-1512436991641-6745cdb1723f?w=800&q=60"},
      {id:8,name:"Coffee Maker",price:4990,cat:"Home",img:"https://images.unsplash.com/photo-1509401932372-365e7fa1c3a2?w=800&q=60"},
      {id:9,name:"Desk Lamp",price:799,cat:"Home",img:"https://images.unsplash.com/photo-1505691723518-36a42c4b8bd4?w=800&q=60"},
    ];

    // State
    let state = {
      products: products.slice(),
      query: '',
      category: 'All',
      minPrice: null,
      maxPrice: null,
      sort: 'featured',
      cart: {}, // id -> {product, qty}
      cartOpen: false
    };

    // Elements
    const productGrid = document.getElementById('productGrid');
    const showingCount = document.getElementById('showingCount');
    const categoryList = document.getElementById('categoryList');
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    const minPriceInput = document.getElementById('minPrice');
    const maxPriceInput = document.getElementById('maxPrice');
    const applyPrice = document.getElementById('applyPrice');
    const resetPrice = document.getElementById('resetPrice');
    const sortSelect = document.getElementById('sortSelect');
    const cartToggle = document.getElementById('cartToggle');
    const cartPanel = document.getElementById('cartPanel');
    const cartItemsContainer = document.getElementById('cartItemsContainer');
    const cartCount = document.getElementById('cartCount');
    const cartSubtotal = document.getElementById('cartSubtotal');
    const closeCart = document.getElementById('closeCart');
    const clearCartBtn = document.getElementById('clearCart');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const filterToggle = document.getElementById('filterToggle');
    const filtersPanel = document.getElementById('filtersPanel');
    const cartEmpty = document.getElementById('cartEmpty');
    const yearEl = document.getElementById('year');
    yearEl.textContent = new Date().getFullYear();

    // Init categories
    function initCategories(){
      const cats = Array.from(new Set(products.map(p=>p.cat)));
      const allBtn = document.createElement('button');
      allBtn.textContent = 'All';
      allBtn.onclick = ()=>{ state.category='All'; render(); highlightCategory(); };
      categoryList.appendChild(allBtn);
      cats.forEach(c=>{
        const btn = document.createElement('button');
        btn.textContent = c;
        btn.onclick = ()=>{ state.category=c; render(); highlightCategory(); };
        categoryList.appendChild(btn);
      });
      highlightCategory();
    }
    function highlightCategory(){
      Array.from(categoryList.children).forEach(btn=>{
        btn.style.outline = (btn.textContent===state.category) ? '2px solid rgba(5,150,105,0.14)' : 'none';
      });
    }

    // Render products based on filters
    function getFilteredProducts(){
      let list = state.products.slice();
      if(state.query){
        const q = state.query.toLowerCase();
        list = list.filter(p=>p.name.toLowerCase().includes(q) || p.cat.toLowerCase().includes(q));
      }
      if(state.category && state.category!=='All'){
        list = list.filter(p=>p.cat===state.category);
      }
      if(state.minPrice != null) list = list.filter(p=>p.price >= state.minPrice);
      if(state.maxPrice != null) list = list.filter(p=>p.price <= state.maxPrice);

      // Sorting
      if(state.sort === 'price-asc') list.sort((a,b)=>a.price-b.price);
      else if(state.sort === 'price-desc') list.sort((a,b)=>b.price-a.price);
      else if(state.sort === 'name-asc') list.sort((a,b)=>a.name.localeCompare(b.name));
      // else featured -> keep original order

      return list;
    }

    function renderProducts(){
      const list = getFilteredProducts();
      productGrid.innerHTML = '';
      showingCount.textContent = list.length;
      if(list.length===0){
        productGrid.innerHTML = '<div class="panel empty">No products found.</div>';
        return;
      }
      list.forEach(p=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="media" aria-hidden="true">
            <img src="${p.img}" alt="${p.name}" style="max-height:100%;width:100%;object-fit:cover">
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3>${p.name}</h3>
            <div class="muted small">${p.cat}</div>
          </div>
          <div class="price-row">
            <div class="price">৳${p.price.toLocaleString()}</div>
            <div class="muted small">Inclusive of VAT</div>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center" class="actions">
            <button class="btn btn-ghost" data-id="${p.id}" onclick="viewDetails(${p.id})">View</button>
            <button class="btn btn-primary" data-id="${p.id}" onclick="addToCart(${p.id})">Add to cart</button>
          </div>
        `;
        productGrid.appendChild(card);
      });
    }

    // Cart functions
    function saveCartToLocal(){
      try{ localStorage.setItem('demo_cart', JSON.stringify(state.cart)); }catch(e){}
    }
    function loadCartFromLocal(){
      try{
        const raw = localStorage.getItem('demo_cart');
        if(raw) state.cart = JSON.parse(raw);
      }catch(e){}
    }
    function addToCart(id){
      const prod = products.find(p=>p.id===id);
      if(!prod) return;
      if(state.cart[id]) state.cart[id].qty += 1;
      else state.cart[id] = {product:prod, qty:1};
      updateCartUI();
      saveCartToLocal();
      openCart(); // show cart after adding
    }
    function removeFromCart(id){
      delete state.cart[id];
      updateCartUI();
      saveCartToLocal();
    }
    function changeQty(id, delta){
      if(!state.cart[id]) return;
      state.cart[id].qty += delta;
      if(state.cart[id].qty <= 0) removeFromCart(id);
      updateCartUI();
      saveCartToLocal();
    }
    function clearCart(){
      state.cart = {};
      updateCartUI();
      saveCartToLocal();
    }
    function cartTotal(){
      let total = 0;
      Object.values(state.cart).forEach(item => total += item.product.price * item.qty);
      return total;
    }
    function cartItemsCount(){
      let count = 0;
      Object.values(state.cart).forEach(item => count += item.qty);
      return count;
    }
    function updateCartUI(){
      const items = Object.values(state.cart);
      cartCount.textContent = cartItemsCount();
      cartItemsContainer.innerHTML = '';
      if(items.length===0){
        cartItemsContainer.appendChild(cartEmpty);
        cartSubtotal.textContent = '৳0';
        return;
      }
      items.forEach(item=>{
        const el = document.createElement('div');
        el.className = 'cart-item panel';
        el.style.padding = '8px';
        el.innerHTML = `
          <img src="${item.product.img}" alt="${item.product.name}" />
          <div style="flex:1">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:700">${item.product.name}</div>
              <div style="font-weight:700">৳${(item.product.price*item.qty).toLocaleString()}</div>
            </div>
            <div class="muted small">${item.product.cat}</div>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
              <div class="qty-control" aria-label="Quantity control">
                <button onclick="changeQty(${item.product.id}, -1)">−</button>
                <div style="padding:6px 12px">${item.qty}</div>
                <button onclick="changeQty(${item.product.id}, 1)">+</button>
              </div>
              <button class="btn btn-ghost" onclick="removeFromCart(${item.product.id})">Remove</button>
            </div>
          </div>
        `;
        cartItemsContainer.appendChild(el);
      });
      cartSubtotal.textContent = '৳' + cartTotal().toLocaleString();
    }

    function openCart(){ cartPanel.classList.add('open'); cartPanel.setAttribute('aria-hidden','false'); state.cartOpen=true; }
    function closeCartFn(){ cartPanel.classList.remove('open'); cartPanel.setAttribute('aria-hidden','true'); state.cartOpen=false; }

    // Small interactions
    function viewDetails(id){ const p = products.find(x=>x.id===id); alert(`${p.name} — ৳${p.price.toLocaleString()}\nCategory: ${p.cat}\n\nThis is a demo product.`); }

    // Event hookups
    document.getElementById('showingCount').textContent = getFilteredProducts().length;
    searchInput.addEventListener('input', (e)=>{ state.query = e.target.value.trim(); render(); });
    clearSearch.addEventListener('click', ()=>{ searchInput.value=''; state.query=''; render(); });
    applyPrice.addEventListener('click', ()=>{
      const mn = Number(minPriceInput.value);
      const mx = Number(maxPriceInput.value);
      state.minPrice = Number.isFinite(mn) && mn>0 ? mn : null;
      state.maxPrice = Number.isFinite(mx) && mx>0 ? mx : null;
      render();
    });
    resetPrice.addEventListener('click', ()=>{ minPriceInput.value=''; maxPriceInput.value=''; state.minPrice=null; state.maxPrice=null; render(); });
    sortSelect.addEventListener('change', (e)=>{ state.sort = e.target.value; render(); });
    cartToggle.addEventListener('click', ()=>{ state.cartOpen ? closeCartFn() : openCart(); });
    closeCart.addEventListener('click', closeCartFn);
    clearCartBtn.addEventListener('click', ()=>{ if(confirm('Clear cart?')) clearCart(); });
    checkoutBtn.addEventListener('click', ()=>{ if(cartItemsCount()===0){ alert('Cart is empty'); return; } alert('Checkout demo — total: ৳' + cartTotal().toLocaleString()); });

    filterToggle.addEventListener('click', ()=>{
      const isHidden = filtersPanel.style.display === 'none' || getComputedStyle(filtersPanel).display === 'none';
      filtersPanel.style.display = isHidden ? 'block' : 'none';
    });

    // Render pipeline
    function render(){
      renderProducts();
      updateCartUI();
      highlightCategory();
    }

    // Init
    loadCartFromLocal();
    initCategories();
    render();

    // Expose a few functions to global scope for inline onclick handlers
    window.addToCart = addToCart;
    window.changeQty = changeQty;
    window.removeFromCart = removeFromCart;
    window.viewDetails = viewDetails;

    // Accessibility: close cart with Esc
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ closeCartFn(); filtersPanel.style.display='block'; } });

  </script>
</body>
</html>

